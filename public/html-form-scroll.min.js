(()=>{let s="hf-scroll-",E=`${s}miss`,q=`${s}to`,v=`${s}target`,$="hf-focus-ignore",p=`${s}ignore`,r=e=>document.querySelector(e),n=window,i=document;i.addEventListener("hf:swap",w),i.addEventListener("hf:swapped",T);let y=null;n.addEventListener("click",e=>{y=e.target});let{attr:a,hasAttr:h}=n.htmf,u;function w(e){let{submitter:m,form:g}=e.detail.submitter,c=i.activeElement,t=c===i.body?y:c,f=[m,g].find(L=>a(L,q)),l=a(t,v);l&&(t=r(l));let o=a(t?.closest(`[${o}]`),o),b=a(t,"name");u={y:n.scrollY,to:f,a:{t:{y:d(t),q:t?.id&&`#${t.id}`||b&&`[name="${b}"]`},m:{y:d(r(o)),q:o}}}}function T(){let e=r("[autofocus]");if(e)return e.focus(),e.scrollIntoView({behavior:"auto",block:"center",inline:"center"});if(!u)return;let{y:m,to:g,a:{t:c,m:t}}=u,f=r(g);if(f)return f.scrollIntoView({behavior:"smooth"});let l,o=c.q&&(l=r(c.q))?c.y:t.q&&(l=r(t.q))?t.y:0;h($)(l)||(l?.focus?.(),l?.select?.()),h(p)(i.body)||(l&&o?n.scrollTo({top:n.scrollY+d(l)-o}):n.scrollTo({top:m}))}function d(e){return e?.getBoundingClientRect().top}})();
